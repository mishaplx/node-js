(()=>{"use strict";var e={266:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=s(238),u=s(269),d=s(496);t.default=function(e,t){const s="userId"in u.parse(e.url,!0).query;return s?(0,r.deleteUser)(e,t):s?void 0:(0,d.badRequest)(e,t,400,"Bad request")}},42:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=s(269),u=s(443);t.default=function(e,t){const s=r.parse(e.url,!0),d="userId"in s.query;return d?(0,u.getuserById)(e,t,s):d?void 0:(0,u.getAllusers)(e,t)}},789:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=s(496),u=s(806);t.default=function(e,t){e.on("data",(s=>{const d=JSON.parse(s.toString()),o="username"in d,n="age"in d,i="hobbies"in d;let a=[];return a.push(o),a.push(n),a.push(i),a=a.filter((e=>0==e)),a.length>=1?(0,r.badRequest)(e,t,400,"body does not contain required fields"):(0,u.addUser)(e,t,d)}))}},857:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=s(575);t.default=function(e,t){e.on("data",(s=>{(0,r.updateUser)(e,t,s)}))}},24:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.users=void 0;const r=s(828);t.users=[{id:(0,r.v4)(),username:"misha",age:25,hobbies:[]},{id:(0,r.v4)(),username:"oleg",age:18,hobbies:[]}]},238:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUser=void 0;const r=s(269),u=s(496),d=s(24);t.deleteUser=function(e,t){const s=r.parse(e.url,!0).query.userId;return(0,u.validateUuid)(s)?d.users.map(((e,t)=>{e.id==s&&d.users.splice(t,1)})).length?(t.statusCode=204,void t.end(JSON.stringify({data:d.users}))):(0,u.badRequest)(e,t,404,"This user does`t exist "):(0,u.badRequest)(e,t,400,"No valid uuid")}},443:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllusers=t.getuserById=void 0;const r=s(24),u=s(496);t.getuserById=function(e,t,s){const d=s.query.userId;if(!(0,u.validateUuid)(d))return void(0,u.badRequest)(e,t,400,"No valid uuid");const o=r.users.filter((e=>e.id===d));o.length?t.end(JSON.stringify({data:o})):(0,u.badRequest)(e,t,404,"Not Found")},t.getAllusers=function(e,t){t.end(JSON.stringify({data:r.users}))}},806:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addUser=void 0;const r=s(24),u=s(828);t.addUser=function(e,t,s){const d={id:(0,u.v4)(),username:s.username,age:s.age,hobbies:s.hobbies};r.users.push(d),t.statusCode=201,t.end(JSON.stringify({data:d}))}},575:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateUser=void 0;const r=s(269),u=s(496),d=s(24);t.updateUser=function(e,t,s){const o=JSON.parse(s.toString()),n=r.parse(e.url,!0).query.userId;if(!(0,u.validateUuid)(n))return(0,u.badRequest)(e,t,400,"No valid uuid");const i=d.users.filter((e=>e.id===n));if(!i.length)return(0,u.badRequest)(e,t,404,"Not Found");const a=Object.assign(i[0],o);t.end(JSON.stringify({data:a}))}},496:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateUuid=t.badRequest=void 0;const r=s(828);t.badRequest=function(e,t,s,r){t.statusCode=s,t.statusMessage=r,t.end(JSON.stringify({error:r}))},t.validateUuid=function(e){return r.validate(e)}},142:e=>{e.exports=require("dotenv")},269:e=>{e.exports=require("url")},828:e=>{e.exports=require("uuid")},685:e=>{e.exports=require("http")}},t={};function s(r){var u=t[r];if(void 0!==u)return u.exports;var d=t[r]={exports:{}};return e[r](d,d.exports,s),d.exports}(()=>{const e=s(142),t=s(685),r=s(789),u=s(42),d=s(857),o=s(266),n=s(496);t.createServer((function(e,t){e.url.includes("/api/users")?"GET"==e.method?(0,u.default)(e,t):"POST"==e.method?(0,r.default)(e,t):"PUT"==e.method?(0,d.default)(e,t):"DELETE"==e.method&&(0,o.default)(e,t):(0,n.badRequest)(e,t,404,"Not found")})).listen(e.config().parsed.PORT),console.log(`server start ${e.config().parsed.PORT}`)})()})();